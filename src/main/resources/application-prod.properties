# Production Redis Configuration
# Override cho profile "prod"
# Trong Docker, sẽ dùng environment variables từ docker-compose.prod.yml

# Redis Configuration - Sử dụng environment variables
# Không set host/port ở đây để app dùng env vars
# spring.data.redis.host=${SPRING_DATA_REDIS_HOST:163.61.182.56}
# spring.data.redis.port=${SPRING_DATA_REDIS_PORT:6379}

spring.data.redis.database=0
spring.data.redis.timeout=10000ms

# Redis Connection Pool (Lettuce)
spring.data.redis.lettuce.pool.enabled=true
spring.data.redis.lettuce.pool.max-active=8
spring.data.redis.lettuce.pool.max-idle=8
spring.data.redis.lettuce.pool.min-idle=0
spring.data.redis.lettuce.pool.max-wait=-1ms

# Redis Lettuce - Không validate connection ngay khi khởi động
spring.data.redis.lettuce.shutdown-timeout=100ms

# Spring Boot Actuator Configuration
management.endpoints.web.exposure.include=health,info,metrics,prometheus
management.endpoint.health.show-details=when-authorized
management.metrics.export.prometheus.enabled=true
management.metrics.tags.application=${spring.application.name}

# Logging Configuration - Performance monitoring
logging.level.com.example.phonehub.utils.PerformanceLoggingInterceptor=INFO
# Uncomment để debug Redis connection issues
# logging.level.org.springframework.data.redis=DEBUG
# logging.level.io.lettuce.core=DEBUG

# Mail Configuration - Sử dụng environment variables từ docker-compose
# spring.mail.host=${SPRING_MAIL_HOST:smtp.gmail.com}
# spring.mail.port=${SPRING_MAIL_PORT:587}
# spring.mail.username=${SPRING_MAIL_USERNAME}
# spring.mail.password=${SPRING_MAIL_PASSWORD}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.default-encoding=UTF-8

